<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A B Experiments</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div id="alphabet">
      <div class="row row1">
        <div class="letter col1 red" id="A">
          <!-- <img class="black" id="blackA" src="images/blackA-8.png" > -->
          <canvas id="blackAcanvas" width="300" height="300">
          </canvas>
          <svg class="circle" height="180" width="180">
            <circle class="circle1" cx="90" cy="90" r="90"/>
          </svg>
          </circle>
          </svg>
          <svg class="circle" height="180" width="180">
            <circle class="circle2" cx="90" cy="90" r="66"/>
            </svg>
          </circle>
          </svg>
          <svg class="circle circle3" height="180" width="180">
            <circle cx="90" cy="90" r="46"/>
            </svg>
          </circle>
          </svg>
          <img class="white" id="whiteA" src="images/whiteA-8.png" >
          <svg class="circle" height="180" width="180">
            <circle class="innerCircle" id="blackA" cx="90" cy="90" r="27" onmouseover="newLetterCanvas(event)"/>
          </svg>
          </circle>
          </svg>
        </div>
        <div class="letter col2 red" id="B">
          <img class="black" id="blackB" src="images/b-8.png" >
          <svg class="circle" height="180" width="180">
            <circle class="circle1" cx="90" cy="90" r="90"/>
          </svg>
          </circle>
          </svg>
          <svg class="circle" height="180" width="180">
            <circle class="circle2" cx="90" cy="90" r="66"/>
            </svg>
          </circle>
          </svg>
          <svg class="circle circle3" height="180" width="180">
            <circle cx="90" cy="90" r="46"/>
            </svg>
          </circle>
          </svg>
          <img class="white" id="whiteB" src="images/whiteB-8.png" >
          <svg class="circle" height="180" width="180">
            <circle class="innerCircle" id="blackB" cx="90" cy="90" r="27" onmouseover="newLetterCanvas(event)"/>
            </svg>
          </circle>
          </svg>
        </div>
        <div class="letter col3 red" id="C">
          <!-- <img class="black rotate270" id="blackC" src="images/blackA-8.png"> -->
          <canvas id="blackCcanvas" width="300" height="300">
          </canvas>
          <svg class="circle" height="180" width="180">
            <circle class="circle1" cx="90" cy="90" r="90"/>
          </svg>
          </circle>
          </svg>
          <svg class="circle" height="180" width="180">
            <circle class="circle2" cx="90" cy="90" r="66"/>
            </svg>
          </circle>
          </svg>
          <svg class="circle circle3" height="180" width="180">
            <circle cx="90" cy="90" r="46"/>
            </svg>
          </circle>
          </svg>
          <img class="white rotate270" id="whiteC" src="images/whiteA-8.png" >
          <svg class="circle" height="180" width="180">
            <circle class="innerCircle" id="blackC" cx="90" cy="90" r="27" onmouseover="newLetterCanvas(event)"/>
            </svg>
          </circle>
          </svg>
        </div>
      </div>
      <div class="row row2">
        <div class="letter col1 red" id="A2">
            <img class="black" id="blackA" src="images/blackA-8.png" >
           <!--  <canvas id="blackAcanvas" width="300" height="300">
            </canvas> -->
            <svg class="circle circle1 circleSVG" height="180" width="180">
              <circle class="circle1" cx="90" cy="90" r="90"/>
            </svg>
            </circle>
            </svg>
            <svg class="circle circle2 circleSVG" height="180" width="180">
              <circle class="circle2" cx="90" cy="90" r="66"/>
              </svg>
            </circle>
            </svg>
            <svg class="circle circle3 circleSVG" height="180" width="180">
              <circle cx="90" cy="90" r="46"/>
              </svg>
            </circle>
            </svg>
            <img class="white" id="whiteA" src="images/whiteA-8.png" >
            <svg class="circle circleSVG innerCircle" id="poop" height="180" width="180">
              <circle class="innerCircle" id="blackA2" cx="90" cy="90" r="27" onmouseover="innerAnim(event)"/>
            </svg>
            </circle>
            </svg>
          </div>
        <div class="letter col2 red" id="A3">
          <img class="black" id="blackA" src="images/blackA-8.png" >
          <!-- <canvas id="blackAcanvas" width="300" height="300">
          </canvas> -->
          <svg class="circle circleSVG" height="180" width="180">
            <circle class="circle1" cx="90" cy="90" r="90"/>
          </svg>
          </circle>
          </svg>
          <svg class="circle circleSVG" height="180" width="180">
            <circle class="circle2" cx="90" cy="90" r="66"/>
            </svg>
          </circle>
          </svg>
          <svg class="circle circle3 circleSVG" height="180" width="180">
            <circle cx="90" cy="90" r="46"/>
            </svg>
          </circle>
          </svg>
          <img class="white" id="whiteA" src="images/whiteA-8.png" >
          <svg class="circle circleSVG" height="180" width="180">
            <circle class="innerCircle" id="blackA3" cx="90" cy="90" r="27" onmouseover="thirdAnim(event)"/>
          </svg>
          </circle>
          </svg>
        </div>
        <div class="letter col3 red" id="A4">
            <img class="black" id="blackA" src="images/blackA-8.png" >
           <!--  <canvas id="blackAcanvas" width="300" height="300">
            </canvas> -->
            <svg class="circle circle1 circleSVG" height="180" width="180">
              <circle class="circle1" cx="90" cy="90" r="90"/>
            </svg>
            </circle>
            </svg>
            <svg class="circle circle2 circleSVG" height="180" width="180">
              <circle class="circle2" cx="90" cy="90" r="66"/>
              </svg>
            </circle>
            </svg>
            <svg class="circle circle3 circleSVG" height="180" width="180">
              <circle cx="90" cy="90" r="46"/>
              </svg>
            </circle>
            </svg>
            <img class="white" id="whiteA" src="images/whiteA-8.png" >
            <svg class="circle circleSVG innerCircle"  height="180" width="180">
              <circle class="innerCircle" id="blackA4" cx="90" cy="90" r="27" onmouseover="threeInnerAnim(event)"/>
            </svg>
            </circle>
            </svg>
          </div>
      </div>
      <div class="row row3">
        <div class="letter col1 red" id="A5">
              <img class="black" id="blackA" src="images/blackA-8.png" >
             <!--  <canvas id="blackAcanvas" width="300" height="300">
              </canvas> -->
              <svg class="circle circle1 circleSVG" height="180" width="180">
                <circle class="circle1" cx="90" cy="90" r="90"/>
              </svg>
              </circle>
              </svg>
              <svg class="circle circle2 circleSVG" height="180" width="180">
                <circle class="circle2" cx="90" cy="90" r="66"/>
                </svg>
              </circle>
              </svg>
              <svg class="circle circle3 circleSVG" height="180" width="180">
                <circle cx="90" cy="90" r="46"/>
                </svg>
              </circle>
              </svg>
              <img class="white" id="whiteA" src="images/whiteA-8.png" >
              <svg class="circle circleSVG innerCircle" height="180" width="180">
                <circle class="innerCircle" id="blackA5" cx="90" cy="90" r="27" onmouseover="innerAndThirdAnim(event)"/>
              </svg>
              </circle>
              </svg>
        </div>
        <div class="letter col2 red" id="A6">
              <img class="black" id="blackA" src="images/blackA-8.png" >
             <!--  <canvas id="blackAcanvas" width="300" height="300">
              </canvas> -->
              <svg class="circle circle1 circleSVG" height="180" width="180">
                <circle class="circle1" cx="90" cy="90" r="90"/>
              </svg>
              </circle>
              </svg>
              <svg class="circle circle2 circleSVG" height="180" width="180">
                <circle class="circle2" cx="90" cy="90" r="66"/>
                </svg>
              </circle>
              </svg>
              <svg class="circle circle3 circleSVG" height="180" width="180">
                <circle cx="90" cy="90" r="46"/>
                </svg>
              </circle>
              </svg>
              <img class="white" id="whiteA" src="images/whiteA-8.png" >
              <svg class="circle circleSVG innerCircle" height="180" width="180">
                <circle class="innerCircle" id="blackA6" cx="90" cy="90" r="27" onmouseover="scaleRevealHelper(event)"/>
              </svg>
              </circle>
              </svg>
        </div>
         <div class="letter col3 red" id="A7">
              <img class="black" id="blackA" src="images/blackA-8.png" >
             <!--  <canvas id="blackAcanvas" width="300" height="300">
              </canvas> -->
              <svg class="circle circle1 circleSVG" height="180" width="180">
                <circle class="circle1" cx="90" cy="90" r="90"/>
              </svg>
              </circle>
              </svg>
              <svg class="circle circle2 circleSVG" height="180" width="180">
                <circle class="circle2" cx="90" cy="90" r="66"/>
                </svg>
              </circle>
              </svg>
              <svg class="circle circle3 circleSVG" height="180" width="180">
                <circle cx="90" cy="90" r="46"/>
                </svg>
              </circle>
              </svg>
              <img class="white" id="whiteA2" src="images/whiteA2-8.png" >
              <svg class="circle circleSVG innerCircle" height="180" width="180">
                <circle class="innerCircle" id="blackA7" cx="90" cy="90" r="27" onmouseover="triMove(event)"/>
              </svg>
              </circle>
              </svg>
        </div>
      </div>
      <div class="row row4">
        <div class="letter col1 red" id="A8">
              <img class="black" id="blackA" src="images/blackA-8.png" >
             <!--  <canvas id="blackAcanvas" width="300" height="300">
              </canvas> -->
              <svg class="circle circle1 circleSVG" height="180" width="180">
                <circle class="circle1" cx="90" cy="90" r="90"/>
              </svg>
              </circle>
              </svg>
              <svg class="circle circle2 circleSVG" height="180" width="180">
                <circle class="circle2" cx="90" cy="90" r="66"/>
                </svg>
              </circle>
              </svg>
              <svg class="circle circle3 circleSVG" height="180" width="180">
                <circle cx="90" cy="90" r="46"/>
                </svg>
              </circle>
              </svg>
              <img class="white" id="whiteA" src="images/whiteA-8.png" >
              <svg class="circle circleSVG innerCircle" height="180" width="180">
                <circle class="innerCircle" id="blackA8" cx="90" cy="90" r="27" onmouseover="scatter(event)"/>
              </svg>
              </circle>
              </svg>
        </div>
        <div class="letter col2 red" id="A9">
              <img class="black" id="blackA" src="images/blackA-8.png" >
             <!--  <canvas id="blackAcanvas" width="300" height="300">
              </canvas> -->
              <svg class="circle circle1 circleSVG" height="180" width="180">
                <circle class="circle1" cx="90" cy="90" r="90"/>
              </svg>
              </circle>
              </svg>
              <svg class="circle circle2 circleSVG" height="180" width="180">
                <circle class="circle2" cx="90" cy="90" r="66"/>
                </svg>
              </circle>
              </svg>
              <svg class="circle circle3 circleSVG" height="180" width="180">
                <circle cx="90" cy="90" r="46"/>
                </svg>
              </circle>
              </svg>
              <img class="white" id="whiteA" src="images/whiteA-8.png" >
              <svg class="circle circleSVG innerCircle" height="180" width="180">
                <circle class="innerCircle" id="blackA9" cx="90" cy="90" r="27" onmouseover="revealHelper(event)" onclick="scale(event)"/>
              </svg>
              </circle>
              </svg>
        </div>
      </div>
    </div>
  </body>
  <script>  
       //animation code
      var canvasWidth = 252;
      var canvasHeight = 252;
      var x= 0;
      var y= 0;
      var srcX;
      var srcY;
      var sheetWidth = 5544;
      var sheetHeight = 252;
      var frameCount = 22; //1920
      var frameWidth = sheetWidth / frameCount;

      class LetterCanvas {
        constructor(id){  
          this.curFrame = 0;
          this.name = id;
          this.image = new Image();
          this.image.src = "images/" + this.name + "sheet.png";
          this.srcX;
          this.srcY;
          var canvas = $("#" + id + "canvas")[0];
          canvas.width =  canvasWidth;
          canvas.height = canvasHeight;
          this.ctx = canvas.getContext('2d')
          console.log(this.image.src);
        }

        updateFrame(){
          this.curFrame = ++this.curFrame % frameCount;
          this.srcX = this.curFrame * frameWidth;
          this.srcY = 0;
          this.ctx.clearRect(x, y, frameWidth, sheetHeight);
        }
        drawImage(){
          this.updateFrame();
          this.ctx.drawImage(this.image, this.srcX, this.srcY, frameWidth, sheetHeight, x, y, frameWidth, sheetHeight);
        }
      }
      function newLetterCanvas(event){
        // var alreadyAdded = false;
        mouseOver = true;
        // var letter = new LetterCanvas(event.target.id);
        console.log("#" + event.target.id);
        var innerCircle = $("#" + event.target.id)[0];
        var letterDiv = innerCircle.parentElement.parentElement;
        var blackOpacity = $(letterDiv).find(".black").css('opacity');
        if(mouseOver == true && blackOpacity == 1){
            innerCircle.setAttribute('r', 90);
        }
        if($(letterDiv).hasClass("revealed") == false){
          var letter = new LetterCanvas(event.target.id);
          console.log("hi");
           $(letterDiv).find(".circle3").css('opacity', '1');
            setTimeout(function(){
              $(letterDiv).find(".circle2").css('opacity', '1');}, 400);
            setTimeout(function(){
              $(letterDiv).find(".circle1").css('opacity', '1');}, 800);
            setTimeout(function(){
              $(letterDiv).find(".black").fadeTo(1500, 1);
               var intervalID = setInterval(function(){
                if (letter.curFrame === 21) {
                    window.clearInterval(intervalID);
                    $(letterDiv).addClass("revealed");
                }
                else{
                  letter.drawImage(); 
                }
              }, 50);
            }, 1200);
        }
        var blackOpacity = $(letterDiv).find(".black").css('opacity');
        if($(letterDiv).hasClass("revealed") == true){
          if(mouseOver == true){
            innerCircle.setAttribute('r', 90);
          }
        }
      }

    //duplicate C
    var mouseOver = false;
    $('#blackC').click(duplicate);

    function duplicate(){
       $("#C").clone(true).appendTo("body");
    }
    function revealHelper(event){
      var innerCircle = $("#" + event.target.id)[0];
      reveal(innerCircle);
    }
    function reveal(inner){
      var innerCircle = inner;
      var innerCircleDiv = innerCircle.parentElement;
      var letterDiv = innerCircle.parentElement.parentElement;
       $(letterDiv).find(".circle3").css('opacity', '1');
            setTimeout(function(){
              $(letterDiv).find(".circle2").css('opacity', '1');}, 400);
            setTimeout(function(){
              $(letterDiv).find(".circle1").css('opacity', '1');}, 800);
            setTimeout(function(){
              $(letterDiv).find(".black").fadeTo(1500, 1);
              $(letterDiv).addClass("revealed");
          }, 1200);
    }
    function scaleRevealHelper(event){
      var innerCircle = $("#" + event.target.id)[0];
      scaleReveal(innerCircle);
    }
    function scaleReveal(inner){
      var innerCircle = inner;
      var innerCircleDiv = innerCircle.parentElement;
      var letterDiv = innerCircle.parentElement.parentElement;
      if($(letterDiv).hasClass("revealed") == false){
        innerCircle.setAttribute('r', 150);
      }
      else{
        // innerCircle.setAttribute('r', 27);
      }
       $(letterDiv).find(".circle3").css('opacity', '1');
            setTimeout(function(){
              $(letterDiv).find(".circle2").css('opacity', '1');}, 400);
            setTimeout(function(){
              $(letterDiv).find(".circle1").css('opacity', '1');}, 800);
            setTimeout(function(){
              $(letterDiv).find(".black").fadeTo(1500, 1);
              $(letterDiv).addClass("revealed");
            }, 1200);
            setTimeout(function(){
              innerCircle.setAttribute('r', 27);
            }, 1500);

    }

    var radius = 27;
    function scale(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        innerCircle.setAttribute('r', radius + 26);
        radius = radius + 26;
       
    }
    function innerAnim(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(innerCircleDiv).css("top", "75px");
          $(letterDiv).find(".white").css('top', '163px')
        }
    }

    function threeInnerAnim(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(letterDiv).find(".circle2").css('top', '25px');
          $(letterDiv).find(".circle3").css('top', '50px');
          $(innerCircleDiv).css("top", "75px");
          $(letterDiv).find(".white").css('top', '163px')
        }
    }
    function triMove(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(letterDiv).find(".circle1").css('top', '-100px');
          $(letterDiv).find(".circle2").css('top', '-100px');
          $(letterDiv).find(".circle3").css('top', '-100px');
          $(innerCircleDiv).css("top", "75px");
          // $(letterDiv).find(".white").css('top', '163px')
        }
    }
    function scatter(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(letterDiv).find(".circle1").css('right', '100px');
          $(letterDiv).find(".circle2").css('right', '-100px');
          $(letterDiv).find(".circle3").css('top', '-100px');
          $(innerCircleDiv).css("top", "75px");
          $(letterDiv).find(".white").css('top', '163px');
        }
    }
    function innerAndThirdAnim(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(letterDiv).find(".circle3").css('top', '-50px');
          $(innerCircleDiv).css("top", "75px");
          $(letterDiv).find(".white").css('top', '163px')
        }

    }

    function thirdAnim(event){
        var innerCircle = $("#" + event.target.id)[0];
        reveal(innerCircle);
        var innerCircleDiv = innerCircle.parentElement;
        var letterDiv = innerCircle.parentElement.parentElement;
        if($(letterDiv).hasClass("revealed")){
          $(letterDiv).find(".circle3").css('top', '50px');
          // $(letterDiv).find(".white").css('top', '163px')
        }

    }
    

    $(".innerCircle").mouseleave(function(){
      mouseOver = false;
      var innerCircle = this;
      innerCircle.setAttribute('r', 27);
    });

    //each color switch function
    function fadeBlue(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#30aae1');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#298caf');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#1f6072');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#153f49');}, 1200);
    }
    function fadeOrange(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#f47b20');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#cd5c28');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#ab4a25');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#80351e');}, 1200);
    }
    function fadeYellow(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#f3ea1f');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#cbbe2d');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#a49934');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#7c722d');}, 1200);
    }
    function fadeGreen(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#61bd5d');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#559b51');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#42733d');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#2b4727');}, 1200);
    }
    function fadePurple(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#984b9d');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#76377d');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#582b5e');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#3a1c3f');}, 1200);
    }
    function fadePink(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#e23995');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#bd3284');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#922a6c');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#6d2154');}, 1200);
    }
    function fadeRed(clicked){
        var innerCircle = clicked;
        var letterDiv = innerCircle.parentElement.parentElement;
        $(innerCircle).css('fill', '#ed1c24');
        setTimeout(function(){
           $(letterDiv).find(".circle3").css('fill', '#b11116');}, 400);
        setTimeout(function(){
          $(letterDiv).find(".circle2").css('fill', '#7d0000');}, 800);
        setTimeout(function(){
          $(letterDiv).find(".circle1").css('fill', '#470000');}, 1200);
    }
    //loop through different color states
    function switchColor(){
      var innerCircle = this;
      var letterDiv = innerCircle.parentElement.parentElement;
      if($(letterDiv).hasClass( "red" )){
        $(letterDiv).removeClass("red");
        $(letterDiv).addClass("orange");
        fadeOrange(innerCircle);
      }
      else if($(letterDiv).hasClass( "orange" )){
        $(letterDiv).removeClass("orange");
        $(letterDiv).addClass("yellow");
        fadeYellow(innerCircle);
      }
      else if($(letterDiv).hasClass( "yellow" )){
        $(letterDiv).removeClass("yellow");
        $(letterDiv).addClass("green");
        fadeGreen(innerCircle);
      }
      else if($(letterDiv).hasClass( "green" )){
        $(letterDiv).removeClass("green");
        $(letterDiv).addClass("blue");
        fadeBlue(innerCircle);
      }
      else if($(letterDiv).hasClass( "blue" )){
        $(letterDiv).removeClass("blue");
        $(letterDiv).addClass("purple");
        fadePurple(innerCircle);
      }
      else if($(letterDiv).hasClass( "purple" )){
        $(letterDiv).removeClass("purple");
        $(letterDiv).addClass("pink");
        fadePink(innerCircle);
      }
      else if($(letterDiv).hasClass( "pink" )){
        $(letterDiv).removeClass("pink");
        $(letterDiv).addClass("red");
        fadeRed(innerCircle);
      }
    }
    // $('.innerCircle').click(fadeGreen);
    $('.innerCircle').click(switchColor);
  </script>
</html>